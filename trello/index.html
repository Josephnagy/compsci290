<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- always put your name in your work -->
    <meta name="author" content="Joseph Nagy">
    <!-- always label your name with a title -->
    <title>Trello Project </title>
    <!-- scale page to fit entire screen, so it properly fills non-desktop devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- DEV-only for easier refreshing: stop the web browser from ever caching this page or its images -->
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <!-- load required Bootstrap and BootstrapVue CSS -->
    <link rel="stylesheet" href="https://unpkg.com/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.css" />
    <!-- load Vue followed by BootstrapVue -->
    <script src="https://unpkg.com/vue@latest/dist/vue.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.js"></script>
    <!-- load the following for BootstrapVueIcons support -->
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue-icons.js"></script>
    <!-- Link the stylesheet -->
    <link rel="stylesheet" href="style.css">
    <!-- interaction for this page, defer loading until after page to allow access to DOM elements -->
    <script defer src="example_data.js"></script>
    <script defer src="main.js"></script>
    <script defer src="classes.js"></script>
</head>

<body>
    <div id="app">
        <!-- Page Header -->
        <header>
            <h1>{{currentProject.name}}</h1>
            <h3>{{currentProject.boardDescription}}</h3>
            <input type="text" placeholder="Search Trello Board" v-model="searchText">
        </header>
        <div class="container"
            :style="{ backgroundImage: 'url(data/background-images/' + currentProject.backgroundImage + ')' }">
            <main>
                <!-- Board Container -->
                <b-container>
                    <!-- single row of taskLists -->
                    <b-row 
                        :cols="taskLists.length"
                    >
                        <b-col 
                            v-for="(taskList, t) in taskLists"
                            :key="t"
                        >
                            <!-- taskList CARD -->
                            <b-card :title="taskList.name">
                                <b-card-body>
                                    <b-row cols="1"> <!-- one column because cards should be stacked -->
                                        <b-col 
                                            v-for="(card, c) in taskList.cards"
                                            :key="c"
                                        >
                                            <b-card :title="card.name" :style="{backgroundColor: card.color}">
                                                <!-- card details -->
                                                <div class="card-content">
                                                    <p>{{card.description}}</p>
                                                    <p>Deadline: </p><span :class="getDeadlineClass(card.deadline)">{{displayDate(card.deadline)}}</span>
                                                </div>

                                                <!-- card FOOTER -->
                                                <b-card-footer>
                                                    <!-- modal button -->
                                                    <b-button 
                                                        v-b-modal="'modal'+t+c" 
                                                        variant="info" 
                                                        block>View Card</b-button>
                                                    <!-- MODAL allows user to edit card content -->
                                                    <b-modal 
                                                        :id="'modal'+t+c" 
                                                        :title="card.name" 
                                                        ok-only 
                                                        ok-title="Close Task"
                                                    >
                                                        <!-- edit title -->
                                                        <label><b>Card Title</b></label>
                                                        <input v-model="taskLists[t].cards[c].name" style="width: 100%" type="text"></input>
                                                        <hr />

                                                        <!-- edit description -->
                                                        <label><b>Card Description</b></label>
                                                        <textarea v-model="taskLists[t].cards[c].description" style="width: 100%" type="text"></textarea>
                                                        <hr />

                                                        <!-- edit color -->
                                                        <label><b>Card Color</b></label>
                                                        <input v-model="taskLists[t].cards[c].color" style="width: 100%" type="color"></input>
                                                        <hr />

                                                        <!-- edit deadline -->
                                                        <label><b>Card Deadline</b></label>
                                                        <input v-model="taskLists[t].cards[c].deadline" style="width: 100%" type="datetime-local"></input>
                                                        <hr />

                                                        <!-- edit priority -->
                                                        <label><b>Card Priority</b></label>
                                                        <select name="priority" id="'priority'+t+c" v-model="taskLists[t].cards[c].priority">
                                                            <option value="1">High Priority</option>
                                                            <option value="2">Medium Priority</option>
                                                            <option value="3">Low Priority</option>
                                                        </select>
                                                        <hr />

                                                    </b-modal>

                                                    <!-- Delete card button -->
                                                    <b-button 
                                                        variant="danger" 
                                                        block
                                                        @click="deleteCard(t, c)"
                                                    >Delete Card</b-button>
                                                    
                                                </b-card-footer> 

                                            </b-card>

                                        </b-col>

                                    </b-row>


                                </b-card-body>
                                <!-- taskList CARD FOOTER -->
                                <b-card-footer> 
                                    <!-- button to open create card modal  -->
                                    <b-button 
                                        v-b-modal="'modal'+t" 
                                        variant="info" 
                                        block>Create Card</b-button>

                                    <b-modal
                                        :id="'modal'+t"
                                        @ok="createCard(t)"
                                        @cancel="resetNewCard()"
                                        title="Create New Card"
                                        ok-title="Create Card"
                                    >
                                        <!-- card title  -->
                                        <label><b>Card Title</b></label>
                                        <input v-model="newCard.name" style="width: 100%" type="text"></input>
                                        <hr />

                                        <!-- card description  -->
                                        <label><b>Card Description</b></label>
                                        <input v-model="newCard.description" style="width: 100%" type="text"></input>
                                        <hr />

                                        <!-- card color  -->
                                        <label><b>Card Color</b></label>
                                        <input v-model="newCard.color" style="width: 100%" type="color"></input>
                                        <hr />

                                        <!-- card deadline  -->
                                        <label><b>Card Deadline</b></label>
                                        <input v-model="newCard.deadline" style="width: 100%" type="datetime-local"></input>
                                        <hr />

                                        <!-- card priority  -->
                                        <label><b>Card Priority</b></label>
                                        <select name="priority" id="priority" v-model="newCard.priority">
                                            <option value="1">High Priority</option>
                                            <option value="2">Medium Priority</option>
                                            <option value="3">Low Priority</option>
                                        </select>
                                        <hr />

                                        <!-- TODO: card tags  -->
                                        <label><b>Card Tags</b></label>
                                        <hr />
                                
                                </b-modal>

                                <!-- Delete taskList button -->
                                <b-button variant="danger" block>Delete List</b-button>
                                
                                </b-card-footer>    

                            </b-card>

                        </b-col>

                    </b-row>
                </b-container>
            </main>
        </div>
    </div>
</body>





<footer>
    <p> Background image credit: <a href="www.pexels.com">Pexels</a></p>
</footer>

</html>